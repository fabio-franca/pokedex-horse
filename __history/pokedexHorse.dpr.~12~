program pokedexHorse;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils,
  Horse,
  Horse.Jhonson,
  Horse.BasicAuthentication,
  Horse.Compression,
  Horse.HandleException,
  Horse.OctetStream,
  Horse.Logger,
  Horse.Logger.Provider.LogFile,
  Horse.Etag,
  JOSE.Core.JWT,
  JOSE.Core.Builder,
  Poke in 'model\Poke.pas',
  Connection in 'model\Connection.pas',
  UtilFunctions in 'model\UtilFunctions.pas',
  Skill in 'model\Skill.pas',
  PokeController in 'controller\PokeController.pas',
  Routes in 'model\Routes.pas';

begin
  THorse.Use(Compression())
        .Use(Jhonson())
        .Use(HandleException)
        .Use(OctetStream)
        .Use(eTag);

  THorse.Routes.Prefix('/pokedex');

  Routes.RoutesApplication;

  THorse.Listen(9000,
                procedure
                begin
                  Writeln(Format('Servidor rodando na porta %d ...', [THorse.Port]));
                  Readln;
                end);
end.
